-- Xeno Stabilite Ayarı
if not game:IsLoaded() then game.Loaded:Wait() end

local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

-- Servisler ve Değişkenler
local rep,runs,uis,rs,httpservice,ts = game:GetService("ReplicatedStorage"),game:GetService("RunService"),game:GetService("UserInputService"),game:GetService("RunService"),game:GetService("HttpService"),game:GetService("TweenService")
local lplr = game:GetService("Players").LocalPlayer
local char = lplr.Character or lplr.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")

lplr.CharacterAdded:Connect(function(c) char = c; hum = c:WaitForChild("Humanoid"); hrp = c:WaitForChild("HumanoidRootPart") end)

getgenv().Settings = {
    Esp = { Elements = {}, Players = false, Computers = false, Freezers = false, Vents = false, Exit_Doors = false },
    Method = "Metamethod", Anti_Failure = false, Crawling = 8,
    Hit_Settings = { Distance = 8, Connection = nil },
    Tie_Settings = { Distance = 8, Connection = nil }
}

-- [BYPASS - XENO METAMETHOD]
local enabled = false
local oldNamecall
oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
    local args = {...}
    if enabled and getnamecallmethod() == "FireServer" and args[1] == "SetPlayerMinigameResult" then
        args[2] = true
        return oldNamecall(self, unpack(args))
    end
    return oldNamecall(self, ...)
end)

-- [ANA PENCERE OLUŞTURMA]
local Window = OrionLib:MakeWindow({Name = "CruzHUB - FTF (Xeno Edition)", HidePremium = false, SaveConfig = false, IntroText = "CruzHUB FTF"})

local Tab1 = Window:MakeTab({Name = "Main Features", Icon = "rbxassetid://4483345998"})
local Tab2 = Window:MakeTab({Name = "Visuals (ESP)", Icon = "rbxassetid://4483345998"})
local Tab3 = Window:MakeTab({Name = "Beast Auras", Icon = "rbxassetid://4483345998"})
local Tab4 = Window:MakeTab({Name = "Misc", Icon = "rbxassetid://4483345998"})

-- [TAB 1: BYPASS & MOVEMENT]
Tab1:AddDropdown({
    Name = "Bypass Method",
    Default = "Metamethod",
    Options = {"Metamethod", "Event", "Legitmate"},
    Callback = function(v) getgenv().Settings.Method = v end
})

Tab1:AddToggle({
    Name = "Anti-Failure",
    Default = false,
    Callback = function(v)
        getgenv().Settings.Anti_Failure = v
        if getgenv().Settings.Method == "Metamethod" then
            enabled = v
        elseif getgenv().Settings.Method == "Event" and v then
            task.spawn(function()
                while getgenv().Settings.Anti_Failure do
                    rep.RemoteEvent:FireServer("SetPlayerMinigameResult",true)
                    task.wait(0.1)
                end
            end)
        end
    end
})

Tab1:AddSlider({
    Name = "Crawling Speed",
    Min = 8, Max = 100, Default = 8, Increment = 1,
    Callback = function(v)
        getgenv().Settings.Crawling = v
        pcall(function()
            local stats = lplr:WaitForChild("TempPlayerStatsModule")
            if stats:FindFirstChild("IsCrawling") then
                stats.IsCrawling.Changed:Connect(function()
                    if stats.IsCrawling.Value then hum.WalkSpeed = getgenv().Settings.Crawling end
                end)
            end
        end)
    end
})

-- [TAB 2: ESP SİSTEMİ - TÜM ÖZELLİKLER]
local function handleObjectEsp(name, searchName, color)
    local Elements = getgenv().Settings.Esp.Elements
    Elements[name] = Elements[name] or {}
    
    local function Apply(v)
        if v.Name == searchName and not Elements[name][v] then
            local hi = Instance.new("Highlight", v)
            hi.FillColor, hi.FillTransparency, hi.DepthMode = color, 0.75, Enum.HighlightDepthMode.AlwaysOnTop
            Elements[name][v] = hi
        end
    end

    if getgenv().Settings.Esp[name] then
        for _,v in ipairs(workspace:GetDescendants()) do Apply(v) end
        Elements[name].Conn = workspace.DescendantAdded:Connect(Apply)
    else
        if Elements[name].Conn then Elements[name].Conn:Disconnect() end
        for i,v in pairs(Elements[name]) do if typeof(v) == "Instance" then v:Destroy() end end
        Elements[name] = {}
    end
end

Tab2:AddToggle({Name = "Players ESP", Default = false, Callback = function(v) getgenv().Settings.Esp.Players = v end})
Tab2:AddToggle({Name = "Computers ESP", Default = false, Callback = function(v) getgenv().Settings.Esp.Computers = v handleObjectEsp("Computers", "ComputerTable", Color3.new(0,1,1)) end})
Tab2:AddToggle({Name = "FreezePods ESP", Default = false, Callback = function(v) getgenv().Settings.Esp.Freezers = v handleObjectEsp("Freezers", "FreezePod", Color3.fromRGB(153,204,255)) end})
Tab2:AddToggle({Name = "Vents ESP", Default = false, Callback = function(v) getgenv().Settings.Esp.Vents = v handleObjectEsp("Vents", "Vent", Color3.new(1,1,1)) end})
Tab2:AddToggle({Name = "Exit Doors ESP", Default = false, Callback = function(v) getgenv().Settings.Esp.Exit_Doors = v handleObjectEsp("Exit_Doors", "ExitDoor", Color3.new(1,0.5,0)) end})

-- [TAB 3: BEAST SECTION]
Tab3:AddSlider({
    Name = "Hit Distance", Min = 8, Max = 28, Default = 8, Increment = 1,
    Callback = function(v) getgenv().Settings.Hit_Settings.Distance = v end
})

Tab3:AddToggle({
    Name = "Hit Aura",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().Settings.Hit_Settings.Connection = runs.RenderStepped:Connect(function()
                for _,plr in ipairs(game:GetService("Players"):GetPlayers()) do
                    if plr ~= lplr and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                        if (hrp.Position - plr.Character.HumanoidRootPart.Position).Magnitude <= getgenv().Settings.Hit_Settings.Distance then
                            local ham = char:FindFirstChild("Hammer")
                            if ham then ham.HammerEvent:FireServer("HammerHit", plr.Character.Head) end
                        end
                    end
                end
            end)
        else
            if getgenv().Settings.Hit_Settings.Connection then getgenv().Settings.Hit_Settings.Connection:Disconnect() end
        end
    end
})

-- [TAB 4: MISC]
Tab4:AddButton({Name = "ShiftLock", Callback = function() loadstring(game:HttpGet("https://github.com/ltseverydayyou/uuuuuuu/blob/main/shiftlock?raw=true"))() end})
Tab4:AddButton({Name = "Force Respawn", Callback = function() hum.Health = 0 end})
Tab4:AddLabel("Discord: 86x1")

OrionLib:Init()
